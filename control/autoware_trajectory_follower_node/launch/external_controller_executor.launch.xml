<launch>
  <!-- optional parameters are written here -->
  <arg name="lateral_controller_mode" default="mpc"/>
  <arg name="longitudinal_controller_mode" default="pid"/>
  <!-- <arg name="use_intra_process" /> -->
  <arg name="vehicle_model" default="lexus"/>
  <!-- <arg name="use_individual_control_param" default="false"/> -->
  <!-- <arg name="enable_autonomous_emergency_braking" default="false"/> -->
  <!-- <arg name="enable_predicted_path_checker" default="false"/>  -->

  <node pkg="trajectory_follower_node" exec="controller_node_exe" name="external_controller_executor" output="screen" namespace="control/trajectory_follower" args="--ros-args --log-level info">
    <param from="$(find-pkg-share trajectory_follower_node)/param/lateral/mpc_cgmres.param.yaml"/>
    <param from="$(find-pkg-share autoware_launch)/config/control/trajectory_follower/longitudinal/pid.param.yaml"/>
    <param from="$(find-pkg-share autoware_launch)/config/planning/scenario_planning/common/nearest_search.param.yaml"/>
    <param from="$(find-pkg-share autoware_launch)/config/control/trajectory_follower/trajectory_follower_node.param.yaml"/>
    <param from="$(find-pkg-share $(var vehicle_model)_description)/config/vehicle_info.param.yaml"/>
    <param name="lateral_controller_mode" value="$(var lateral_controller_mode)"/>
    <param name="longitudinal_controller_mode" value="$(var longitudinal_controller_mode)"/>

    <remap from="~/input/reference_trajectory" to="/planning/scenario_planning/trajectory"/>
    <remap from="~/input/current_odometry" to="/localization/kinematic_state"/>
    <remap from="~/input/current_steering" to="/vehicle/status/steering_status"/>
    <remap from="~/input/current_accel" to="/localization/acceleration"/>
    <remap from="~/input/current_operation_mode" to="/system/operation_mode/state"/>
    <remap from="~/output/predicted_trajectory" to="lateral/predicted_trajectory/external"/>
    <remap from="~/output/lateral_diagnostic" to="lateral/diagnostic/external"/>
    <remap from="~/output/slope_angle" to="longitudinal/slope_angle/external"/>
    <remap from="~/output/longitudinal_diagnostic" to="longitudinal/diagnostic/external"/>
    <remap from="~/output/control_cmd" to="control_cmd/external"/>
    <remap from="~/output/debug/predicted_trajectory_in_frenet_coordinate" to="/external/debug/predicted_trajectory_in_frenet_coordinate"/>
    <remap from="~/output/debug/resampled_reference_trajectory" to="/external/debug/resampled_reference_trajectory"/>
  </node>
</launch>
